kind: Module
type: container
name: app
include: [.]
services:
  - name: app
    devMode:
      sync:
        - target: /usr/share/nginx/html/
          source: src/
    dependencies:
        - copy-lib
    ports:
      - name: http
        containerPort: 8080
        servicePort: 80
    ingresses:
      - path: /
        port: http
---
kind: Module
type: exec
name: copy-lib
local: true
include: [.]
tasks:
  - name: copy-lib
    dependencies:
      - build-lib-artifacts
    command:
      - /bin/dh
      - -c
      - |-
        echo "why?"
        mkdir -p src/lib
        cp -r ../.garden/artifacts/lib-artifacts/* src/lib/


